import '../../.justfiles/go/base.just'

# Make local node binaries available like npm does
export PATH := "node_modules/.bin:" + env_var("PATH")

bootstrap:
    cdk bootstrap

build:
    tsc -p tsconfig.json

deploy:
    cdk deploy

test:
    vitest

format:
    pnpm run format

lint:
    pnpm run lint

deploy-test image_tag:
    "{{ justfile_dir() }}/scripts/deploy_test_from_local.sh" "deploy" "{{ image_tag }}" --no-rollback

rollback-test image_tag:
    "{{ justfile_dir() }}/scripts/deploy_test_from_local.sh" "rollback" "{{ image_tag }}"

synth image_tag:
    "{{ justfile_dir() }}/scripts/deploy_test_from_local.sh" "synth" "{{ image_tag }}"
